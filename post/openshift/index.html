<!DOCTYPE HTML>

<html lang="ja-jp">

<head>
	<meta charset="utf-8">
	<title>OpenShift にさわってみた - ゆこさめ．</title>
	<meta name="author" content="map[name:ruta email:]">

	
	
	<meta name="description" content="">
	

	
	<meta name="HandheldFriendly" content="True">
	<meta name="MobileOptimized" content="320">
	<meta name="viewport" content="width=device-width, initial-scale=1">
    
	<link rel="canonical" href="https://yu-kosame.github.io/post/openshift/">
	<link href="https://yu-kosame.github.io//favicon.png" rel="shortcut icon">
	<link href="https://yu-kosame.github.io//css/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="https://yu-kosame.github.io//css/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	
	<link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
  

</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	
	
	
</div>
﻿<h1><a href="https://yu-kosame.github.io/">ゆこさめ．</a></h1>
<nav id="main-nav"><ul class="main">
    <li><a href="/">Diary</a></li>
    <li><a href="/post/">Archives</a></li>
</ul>
</nav>
<nav id="sub-nav">
	<div class="social">
		
		
		
		
		
		
		
		
		
		
		
		
		
		
    	
    	
	</div>
</nav>
</header>
			</div>
		</div>
		<div class="mid-col">
			
			<div class="mid-col-container">
				<div id="content" class="inner">
					<div itemscope itemtype="http://schema.org/Blog">
					<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <h1 class="title" itemprop="name">OpenShift にさわってみた</h1>
	<div class="entry-content" itemprop="articleBody">

<h2 id="アカウント登録">アカウント登録</h2>

<p>OpenShift online に登録しました。<br />
その過程で，メールの URL から認証するところでなぜかエラーになりましたが，次の日アクセスするとうまくできました。</p>

<h2 id="アプリ登録">アプリ登録</h2>

<p>Django を選択し，その後いろいろ設定します。</p>

<pre><code>Public URL  : [appname]-[domainname].rhcloud.com  
Source Code : git:/github.com/openshift/django-example.git  
Cartridges  : Python 2.7  
Scaling     : No scaling  
Region      : No preference  
[Create Application]
</code></pre>

<h2 id="ページの確認">ページの確認</h2>

<p>admin へのリンクに進むと，もうデプロイできてる…！</p>

<h2 id="公開鍵の登録">公開鍵の登録</h2>

<p>mac の場合，</p>

<pre><code class="language-bash">ssh-keygen
vim /Users/username/.ssh/id_rsa.pub
</code></pre>

<p>OpenShift の&rdquo;Set an SSH key&rdquo; にコピペする。</p>

<p>参考：
<a href="http://d.hatena.ne.jp/uco_twinkle/20080409/1207703829">Mac OS X でSSH公開鍵を作成する - マークアッパーなアタシのための雑記</a></p>

<h2 id="クライアントツールをインストールする">クライアントツールをインストールする</h2>

<p>mac の場合（自分memo）</p>

<ol>
<li>Ruby はインストール済み</li>
<li>git もインストール済み</li>
<li><code>sudo gem install rhc</code></li>
<li><code>rhc setup</code></li>
</ol>

<pre><code class="language-bash">Login to openshift.redhat.com: ***@***com # アカウント名
Password: ***

Generate a token now? (yes|no) yes

Your public SSH key must be uploaded to the OpenShift server to access code.  Upload now? (yes|no) yes # さっきコピペしたんだけどな…

Your client tools are now configured.
</code></pre>

<p>参考：
<a href="https://developers.openshift.com/en/getting-started-client-tools.html">Installing Client Tools | OpenShift Developers</a></p>

<h2 id="アプリの編集">アプリの編集</h2>

<p>web インターフェイスの Eclipse plugin もあるけど，コマンドラインのほうがおすすめらしい。<br />
公式ドキュメントにはコマンドラインでのアプリ作成方法が載ってますが，web 画面で作ったのでとばす。</p>

<h3 id="ローカルにコピー">ローカルにコピー</h3>

<p>コマンドラインからつくると，Git Repository が自動的にローカルに保存してくれるらしいですが，web の人は，アプリのページの &ldquo;Source Code&rdquo; の URL をコピーして，</p>

<pre><code class="language-bash">git clone ssh:/.../ /Users/***/appname
</code></pre>

<p>などとします。</p>

<p>こうやって，ローカルで編集するということですね。</p>

<h3 id="git-を使い始める">git を使い始める</h3>

<pre><code class="language-bash">cd /Users/***/appname
git init
</code></pre>

<h3 id="変更後-再投稿する">（変更後）再投稿する</h3>

<pre><code class="language-bash">git add .
git commit -m &quot;some title&quot;
git push
</code></pre>

<p>ローカルに落としたフォルダ内の README.md をみると，<code>git push</code> の後，django admin のユーザ名とパスワードが流れるから気をつけろと書いてある。<br />
なので，よーく探したけど，見つからなかった…。</p>

<p>調べてみるとエラーらしく，<a href="https://forums.openshift.com/how-to-login-on-the-admin-painel">How to login on the admin painel? | OpenShift Forums</a> に
    Django has a standard command to solve this problem:<br />
        1. Login using ssh
        2. Goto the repo/wsgi/openshift directory
        3. type: ./manage.py createsuperuser (and follow instructions)
とあったので，</p>

<pre><code class="language-bash">ssh 128d6...@appname-domainname.rhcroud.com
cd app-root/repo/wsgi/openshift
.manage.py createsuperuser
</code></pre>

<p>と，しました。</p>

<p>これで，admin ページに入れました。</p>

<h2 id="参考">参考</h2>

<ul>
<li><a href="http://workpiles.com/2014/06/openshift-django-web/">OpenshiftでDjango | Workpiles</a></li>
</ul>
</div></article>
					
						<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	
	
	</div>
	
</div>

					
					
					


				    </div>
				</div>
			</div>
			<footer id="footer" class="inner">Copyright &copy; 2016

    ruta

Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a>
<script src="https://yu-kosame.github.io//js/slash.js"></script>
<script src="https://yu-kosame.github.io//js/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script></footer>
		</div>
	</div>
	
</body>
</html>
